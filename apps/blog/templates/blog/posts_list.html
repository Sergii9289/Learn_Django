{% extends "base.html" %}
{% load static %}

{% block title %}–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç—ñ–≤{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>üìö –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç—ñ–≤</h2>
    <table class="table table-hover align-middle">
        <thead class="table-light">
            <tr>
                <th>–ê–≤–∞—Ç–∞—Ä</th>
                <th>–ê–≤—Ç–æ—Ä</th>
                <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
                <th>–ö–æ–Ω—Ç–µ–Ω—Ç</th>
                <th>–î—ñ—ó</th>
            </tr>
        </thead>
        <tbody>
            {% for post in object_list %}
            <tr>
                <td>
                    {% if post.author.avatar %}
                        <!-- –ö–ª—ñ–∫ –ø–æ –∞–≤–∞—Ç–∞—Ä—Ü—ñ –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ -->
                        <a href="#" data-bs-toggle="modal" data-bs-target="#avatarModal{{ post.pk }}">
                            <img src="{{ post.author.avatar.url }}" alt="{{ post.author.name }}"
                                 class="rounded-circle" width="40" height="40">
                        </a>

                        <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ -->
                        <div class="modal fade" id="avatarModal{{ post.pk }}" tabindex="-1" aria-hidden="true">
                          <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title">{{ post.author.name }}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä–∏—Ç–∏"></button>
                              </div>
                              <div class="modal-body text-center">
                                <img src="{{ post.author.avatar.url }}" alt="{{ post.author.name }}" class="img-fluid rounded">
                              </div>
                            </div>
                          </div>
                        </div>
                    {% else %}
                        <span class="text-muted">‚Äî</span>
                    {% endif %}
                </td>
                <td>{{ post.author.name }}</td>
                <td>
                    <a href="{{ post.get_absolute_url }}" class="fw-bold">
                        {{ post.title }}
                    </a>
                </td>
                <td>{{ post.content|truncatechars:50 }}</td>
                <td>
                    <a href="{% url 'blog:post-update' post.pk %}" class="btn btn-sm btn-outline-primary" title="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏">
                        <i class="fas fa-edit"></i>
                    </a>
                    <a href="{% url 'blog:post-delete' post.pk %}" class="btn btn-sm btn-outline-danger" title="–í–∏–¥–∞–ª–∏—Ç–∏">
                        <i class="fas fa-trash-alt"></i>
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="text-center text-muted">–ü–æ–∫–∏ –Ω–µ–º–∞—î –ø–æ—Å—Ç—ñ–≤</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- –ö–Ω–æ–ø–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Å—Ç—É -->
    <a href="{% url 'blog:post-create' %}" class="btn btn-success">‚ûï –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É —Å—Ç–∞—Ç—Ç—é</a>

    <!-- –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è -->
    {% if is_paginated %}
      <div class="pagination mt-3">
        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-outline-secondary">‚¨Ö –ü–æ–ø–µ—Ä–µ–¥–Ω—è</a>
        {% endif %}

        <span class="mx-2">–°—Ç–æ—Ä—ñ–Ω–∫–∞ {{ page_obj.number }} –∑ {{ paginator.num_pages }}</span>

        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}" class="btn btn-outline-secondary">–ù–∞—Å—Ç—É–ø–Ω–∞ ‚û°</a>
        {% endif %}
      </div>
    {% endif %}
</div>
{% endblock %}